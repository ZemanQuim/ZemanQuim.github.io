<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>webpack配置开发环境 | ZemanQuim</title><meta name="description" content="webpack配置开发环境"><meta name="keywords" content="webpack"><meta name="author" content="ZemanQuim"><meta name="copyright" content="ZemanQuim"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="webpack配置开发环境"><meta name="twitter:description" content="webpack配置开发环境"><meta name="twitter:image" content="https://tva1.sinaimg.cn/large/006tNbRwgy1g9ypjtzltyj319e0jgmyq.jpg"><meta property="og:type" content="article"><meta property="og:title" content="webpack配置开发环境"><meta property="og:url" content="https://www.zemanblog.cn/2018/11/20/webpack%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="ZemanQuim"><meta property="og:description" content="webpack配置开发环境"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006tNbRwgy1g9ypjtzltyj319e0jgmyq.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://www.zemanblog.cn/2018/11/20/webpack%E7%AC%94%E8%AE%B0/"><link rel="prev" title="vue脚手架的使用" href="https://www.zemanblog.cn/2018/11/23/Vue/vue-cli%204.x%E8%84%9A%E6%89%8B%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8/"><link rel="next" title="TypeScript笔记" href="https://www.zemanblog.cn/2018/10/27/TypeScript%E7%AC%94%E8%AE%B0/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c14b5a4aaedf05de9863b8b499a208ba";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https:/m.evanchen.cn/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'false',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: undefined,
  medium_zoom: 'false',
  Snackbar: undefined
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">ZemanQuim</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></span><span class="pull_right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">11</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">12</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#webpack-概述"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">webpack 概述</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#webpack-能做什么"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">webpack 能做什么</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#webpack-的模块的说明"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">webpack 的模块的说明</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#webpack-的基本使用"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">webpack 的基本使用</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#webpack打包的基本步骤"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">webpack打包的基本步骤</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#webpack配置到配置文件中"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">webpack配置到配置文件中</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#自动生成html-html-webpack-plugin插件"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text">自动生成html - html-webpack-plugin插件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#webpack中处理-css-文件"><span class="toc_mobile_items-number">2.4.</span> <span class="toc_mobile_items-text">webpack中处理 css 文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#分离-css-文件"><span class="toc_mobile_items-number">2.5.</span> <span class="toc_mobile_items-text">分离 css 文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#webpack-中处理-less-文件"><span class="toc_mobile_items-number">2.6.</span> <span class="toc_mobile_items-text">webpack 中处理 less 文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#webpack-中处理图片-url-loader"><span class="toc_mobile_items-number">2.7.</span> <span class="toc_mobile_items-text">webpack 中处理图片 - url-loader</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#清除dist目录的插件"><span class="toc_mobile_items-number">2.8.</span> <span class="toc_mobile_items-text">清除dist目录的插件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#webpack-配置字体图标-url-loader"><span class="toc_mobile_items-number">2.9.</span> <span class="toc_mobile_items-text">webpack 配置字体图标 - url-loader</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#webpack-使用eslint对js语法检查"><span class="toc_mobile_items-number">2.10.</span> <span class="toc_mobile_items-text">webpack 使用eslint对js语法检查</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#webpack-使用-babel-处理高版本的-js-语法"><span class="toc_mobile_items-number">2.11.</span> <span class="toc_mobile_items-text">webpack 使用 babel 处理高版本的 js 语法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#开发服务器自动刷新"><span class="toc_mobile_items-number">2.12.</span> <span class="toc_mobile_items-text">开发服务器自动刷新</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#webpack性能优化"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">webpack性能优化</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-HMR功能-开启热更新"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">1.HMR功能 开启热更新</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-source-map-提供源代码到构建后代码映射的技术"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text">2.source-map 提供源代码到构建后代码映射的技术</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-oneOf"><span class="toc_mobile_items-number">3.3.</span> <span class="toc_mobile_items-text">3.oneOf</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-缓存"><span class="toc_mobile_items-number">3.4.</span> <span class="toc_mobile_items-text">4.缓存</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-tree-shaking-去除无用的模块"><span class="toc_mobile_items-number">3.5.</span> <span class="toc_mobile_items-text">5.tree shaking :去除无用的模块</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#6-code-split-代码分割"><span class="toc_mobile_items-number">3.6.</span> <span class="toc_mobile_items-text">6.code split 代码分割</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#7-懒加载和预加载"><span class="toc_mobile_items-number">3.7.</span> <span class="toc_mobile_items-text">7.懒加载和预加载</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#8-PWA-渐进式网络开发应用程序-离线可访问"><span class="toc_mobile_items-number">3.8.</span> <span class="toc_mobile_items-text">8.PWA 渐进式网络开发应用程序(离线可访问)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#9-多进程打包"><span class="toc_mobile_items-number">3.9.</span> <span class="toc_mobile_items-text">9.多进程打包</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#10-externals"><span class="toc_mobile_items-number">3.10.</span> <span class="toc_mobile_items-text">10.externals</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#11-dll"><span class="toc_mobile_items-number">3.11.</span> <span class="toc_mobile_items-text">11.dll</span></a></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#webpack-概述"><span class="toc-number">1.</span> <span class="toc-text">webpack 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack-能做什么"><span class="toc-number">1.1.</span> <span class="toc-text">webpack 能做什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack-的模块的说明"><span class="toc-number">1.2.</span> <span class="toc-text">webpack 的模块的说明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#webpack-的基本使用"><span class="toc-number">2.</span> <span class="toc-text">webpack 的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack打包的基本步骤"><span class="toc-number">2.1.</span> <span class="toc-text">webpack打包的基本步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack配置到配置文件中"><span class="toc-number">2.2.</span> <span class="toc-text">webpack配置到配置文件中</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自动生成html-html-webpack-plugin插件"><span class="toc-number">2.3.</span> <span class="toc-text">自动生成html - html-webpack-plugin插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack中处理-css-文件"><span class="toc-number">2.4.</span> <span class="toc-text">webpack中处理 css 文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分离-css-文件"><span class="toc-number">2.5.</span> <span class="toc-text">分离 css 文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack-中处理-less-文件"><span class="toc-number">2.6.</span> <span class="toc-text">webpack 中处理 less 文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack-中处理图片-url-loader"><span class="toc-number">2.7.</span> <span class="toc-text">webpack 中处理图片 - url-loader</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#清除dist目录的插件"><span class="toc-number">2.8.</span> <span class="toc-text">清除dist目录的插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack-配置字体图标-url-loader"><span class="toc-number">2.9.</span> <span class="toc-text">webpack 配置字体图标 - url-loader</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack-使用eslint对js语法检查"><span class="toc-number">2.10.</span> <span class="toc-text">webpack 使用eslint对js语法检查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack-使用-babel-处理高版本的-js-语法"><span class="toc-number">2.11.</span> <span class="toc-text">webpack 使用 babel 处理高版本的 js 语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开发服务器自动刷新"><span class="toc-number">2.12.</span> <span class="toc-text">开发服务器自动刷新</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#webpack性能优化"><span class="toc-number">3.</span> <span class="toc-text">webpack性能优化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-HMR功能-开启热更新"><span class="toc-number">3.1.</span> <span class="toc-text">1.HMR功能 开启热更新</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-source-map-提供源代码到构建后代码映射的技术"><span class="toc-number">3.2.</span> <span class="toc-text">2.source-map 提供源代码到构建后代码映射的技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-oneOf"><span class="toc-number">3.3.</span> <span class="toc-text">3.oneOf</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-缓存"><span class="toc-number">3.4.</span> <span class="toc-text">4.缓存</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-tree-shaking-去除无用的模块"><span class="toc-number">3.5.</span> <span class="toc-text">5.tree shaking :去除无用的模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-code-split-代码分割"><span class="toc-number">3.6.</span> <span class="toc-text">6.code split 代码分割</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-懒加载和预加载"><span class="toc-number">3.7.</span> <span class="toc-text">7.懒加载和预加载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-PWA-渐进式网络开发应用程序-离线可访问"><span class="toc-number">3.8.</span> <span class="toc-text">8.PWA 渐进式网络开发应用程序(离线可访问)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-多进程打包"><span class="toc-number">3.9.</span> <span class="toc-text">9.多进程打包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-externals"><span class="toc-number">3.10.</span> <span class="toc-text">10.externals</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-dll"><span class="toc-number">3.11.</span> <span class="toc-text">11.dll</span></a></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://tva1.sinaimg.cn/large/006tNbRwgy1g9ypjtzltyj319e0jgmyq.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">webpack配置开发环境</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2018-11-20<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-08-05</time><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon" aria-hidden="true"></i><span>字数总计: </span><span class="word-count">2.8k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon" aria-hidden="true"></i><span>阅读时长: 11 分钟</span><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="webpack-概述"><a href="#webpack-概述" class="headerlink" title="webpack 概述"></a>webpack 概述</h1><blockquote>
<p>webpack 是一个现代 javascript 应用程序的 <strong>静态模块打包器 (module bundler)</strong></p>
</blockquote>
<p><a href="https://webpack.js.org/" target="_blank" rel="noopener">webpack官网</a></p>
<h2 id="webpack-能做什么"><a href="#webpack-能做什么" class="headerlink" title="webpack 能做什么"></a>webpack 能做什么</h2><p>webpack是一个静态模块打包器</p>
<ul>
<li>语法转换<ul>
<li>less/sass转换成css</li>
<li>ES6转换成ES5</li>
<li>typescript转换成js</li>
</ul>
</li>
<li>html/css/js 代码压缩合并 (打包)</li>
<li>webpack可以在开发期间提供一个开发环境<ul>
<li>自动开启浏览器</li>
<li>自动监视文件变化</li>
<li>自动刷新浏览器</li>
</ul>
</li>
<li>项目一般先打包再上线</li>
</ul>
<h2 id="webpack-的模块的说明"><a href="#webpack-的模块的说明" class="headerlink" title="webpack 的模块的说明"></a>webpack 的模块的说明</h2><p>在 webpack 中, 一切的静态资源都称之为模块   (html/css/js/图片..)</p>
<ul>
<li>css</li>
<li>js</li>
<li>图片</li>
<li>字体图标</li>
</ul>
<p>webpack还兼容所有的模块化语法:</p>
<pre><code>1. nodejs中, commonjs
2. 浏览器中, seajs  和  requirejs
3. es6 中新增的模块化语法 </code></pre><p>可以在浏览器中使用 commonjs 规范</p>
<h1 id="webpack-的基本使用"><a href="#webpack-的基本使用" class="headerlink" title="webpack 的基本使用"></a>webpack 的基本使用</h1><h2 id="webpack打包的基本步骤"><a href="#webpack打包的基本步骤" class="headerlink" title="webpack打包的基本步骤"></a>webpack打包的基本步骤</h2><ul>
<li><p>初始化:</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 创建一个项目文件夹</span><br><span class="line">mkdir webpack-demo</span><br><span class="line"># 进入项目目录中</span><br><span class="line">cd webpack-demo</span><br><span class="line"># 初始化项目及package.json</span><br><span class="line">yarn init -y</span><br><span class="line"># 创建源目录</span><br><span class="line">mkdir src</span><br><span class="line"># 在src中创建一个main.js入口文件</span><br><span class="line">touch src&#x2F;main.js</span><br><span class="line"># 在package.json同级目录下创建public并且要有入口html</span><br><span class="line">mkdir public</span><br><span class="line">touch public&#x2F;index.html</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装webpack: </p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 进行安装webpack和webpack-cli</span><br><span class="line"># -D 表示 --save-dev 的缩写,代表项目开发时依赖</span><br><span class="line">yarn add global webpack webpack-cli -D</span><br><span class="line"># 在package.js同级目录下创建webpack.config.js</span><br><span class="line">touch webpack.config.js</span><br></pre></td></tr></table></figure>


</li>
</ul>
<p><strong>tips:</strong></p>
<ul>
<li>npm中 –save和 –save-dev的区别<ul>
<li>–save  简写-S: 将安装包作为项目的依赖  (<strong>目前为默认值</strong>),  早期的 npm 安装包的时候, 必须加上 –save 才会添加到 package.json 项目依赖中去</li>
<li>–save-dev  简写 -D: 将安装包作为开发阶段的依赖</li>
<li>dependences:  项目依赖, 项目上线也要用的</li>
<li>devDependencies: 开发依赖, 只在开发中使用, 上线时不要用的</li>
</ul>
</li>
</ul>
<p><strong>注意点:yarn只认识 -D 不认识 –save-dev</strong></p>
<h2 id="webpack配置到配置文件中"><a href="#webpack配置到配置文件中" class="headerlink" title="webpack配置到配置文件中"></a>webpack配置到配置文件中</h2><p>上面我们已经基本搭建好了webpack的雏形了,接下来:</p>
<ul>
<li><p>在package.json中配置scripts </p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scripts: &#123;</span><br><span class="line">	<span class="string">"build"</span>: <span class="string">"webpack --config webpack.config.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> <code>--config  webpack.config.js</code> 这个配置文件名为默认值, 不加也会默认找这个文件,可以不用写</p>
</li>
<li><p>配置 webpack.config.js </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// entry: 配置入口文件 (从哪个文件开始打包)</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span>,</span><br><span class="line">   <span class="comment">// output: 配置输出 (打包到哪去)</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      <span class="comment">// 打包输出的目录 (必须是绝对路径)</span></span><br><span class="line">    path: path.join(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">      <span class="comment">// 打包生成的文件名</span></span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">   &#125;,</span><br><span class="line">  <span class="comment">// 打包模式 production 压缩/development 不压缩</span></span><br><span class="line">  mode: <span class="string">'development'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="自动生成html-html-webpack-plugin插件"><a href="#自动生成html-html-webpack-plugin插件" class="headerlink" title="自动生成html - html-webpack-plugin插件"></a>自动生成html - html-webpack-plugin插件</h2><blockquote>
<p>目前我们都是在 index.html 中手动引入打包后的资源，这种引入方式是有缺点的</p>
</blockquote>
<blockquote>
<p>比如: 文件名依赖问题，<code>假如 webpack 配置中的输出文件名修改了，需要及时在 index.html 中同步修改</code></p>
</blockquote>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 下载插件</span><br><span class="line">yarn add html-webpack-plugin  -D</span><br><span class="line"># 在webpack.config.js中引入插件,注意不要用ES6的import,因为webpack并不在打包范围内,他也是依赖node环境的</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span> (<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"># 配置插件</span><br><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">    template: <span class="string">'./public/index.html'</span></span><br><span class="line">    <span class="comment">//压缩html代码</span></span><br><span class="line">    minify:&#123;</span><br><span class="line">      <span class="comment">//移除空格</span></span><br><span class="line">      collapseWhitespace:<span class="literal">true</span>,</span><br><span class="line">      <span class="comment">//移除注释</span></span><br><span class="line">      removeComments:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>配置好了之后, public 目录的 index.html 就不需要引入打包后的文件了, 会自动被插件生成 html 引入</p>
</blockquote>
<blockquote>
<p>webpack默认只认识 js 文件, 但是webpack 可以使用 <a href="https://www.webpackjs.com/concepts/loaders" target="_blank" rel="noopener">loader</a> 来加载预处理文件, 允许webpack也可以打包 js之外的静态资源。<br>所以webpack如果要处理其他文件类型, <strong>记得要先配置对应的 loader</strong></p>
</blockquote>
<h2 id="webpack中处理-css-文件"><a href="#webpack中处理-css-文件" class="headerlink" title="webpack中处理 css 文件"></a>webpack中处理 css 文件</h2>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 创建css文件夹</span><br><span class="line">mkdir src&#x2F;css</span><br><span class="line"># 创建css文件</span><br><span class="line">touch src&#x2F;css&#x2F;index.css</span><br><span class="line"># 并且在main.js中引入这个css</span><br><span class="line">require(&#39;.&#x2F;css&#x2F;index.css&#39;)</span><br><span class="line"># 安装loader</span><br><span class="line">yarn add style-loader css-loader -D</span><br></pre></td></tr></table></figure>

   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置js</span></span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  <span class="comment">// loader的规则</span></span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// 正则表达式，用于匹配所有的css文件</span></span><br><span class="line">      test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      <span class="comment">// 使用什么样的loader进行解析</span></span><br><span class="line">      use: [ <span class="string">"style-loader"</span>, <span class="string">"css-loader"</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="分离-css-文件"><a href="#分离-css-文件" class="headerlink" title="分离 css 文件"></a>分离 css 文件</h2><blockquote>
<p>我们上面的操作，使得<code>css</code>和<code>js</code>文件混杂在一起了，一个文件请求次数是少了</p>
</blockquote>
<blockquote>
<p>但是如果文件太大的话，也不是太好，那有没有什么办法把<code>css</code>分离出来呢？ </p>
</blockquote>
<blockquote>
<p>有一个插件，<code>mini-css-extract-plugin</code>，这个插件支持<code>webpack4.x</code></p>
</blockquote>
<blockquote>
<p>还有一个插件<code>extract-text-webpack-plugin</code>这个插件对<code>webpack3.x</code>的版本支持，被<code>webpack4.x</code>废弃了 (所以没用了)</p>
</blockquote>
<ul>
<li><p>安装依赖包</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add mini-css-extract-plugin -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>在<code>webpack.config.js</code>文件中，引入这个模块 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入分离 css 文件的 模块</span></span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置loaders</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模块加载</span></span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  <span class="comment">// loader的规则</span></span><br><span class="line">  rules: [</span><br><span class="line">    <span class="comment">// 配置 css 文件的解析</span></span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      use: [ <span class="comment">// 根据官方文档写的，注意'css-loader'的书写位置</span></span><br><span class="line">        &#123;</span><br><span class="line">          loader: MiniCssExtractPlugin.loader,</span><br><span class="line">          options: &#123;</span><br><span class="line">          publicPath:<span class="string">'../'</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'css-loader'</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>插件的配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  <span class="comment">// 定义打包好的文件的存放路径和文件名</span></span><br><span class="line">  <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">    filename: <span class="string">'css/index.css'</span></span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>




</li>
</ul>
<h2 id="webpack-中处理-less-文件"><a href="#webpack-中处理-less-文件" class="headerlink" title="webpack 中处理 less 文件"></a>webpack 中处理 less 文件</h2><ul>
<li><p>下载依赖包</p>
<p> 注意: 解析less文件需要识别 less 语法, 所以除了 <code>less-loader</code>  需要额外下载 <code>less</code> 包  </p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add less  less-loader  -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置 less 文件的解析</span></span><br><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: MiniCssExtractPlugin.loader,</span><br><span class="line">      options: &#123;</span><br><span class="line">          publicPath:<span class="string">'../'</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;, </span><br><span class="line">    <span class="string">'css-loader'</span>,</span><br><span class="line">    <span class="string">'less-loader'</span> </span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="webpack-中处理图片-url-loader"><a href="#webpack-中处理图片-url-loader" class="headerlink" title="webpack 中处理图片 - url-loader"></a>webpack 中处理图片 - url-loader</h2><blockquote>
<p>我们试了一下，在<code>css</code>中用到一下背景图片，结果就报错了，难道<code>webpack</code>连图片也认不出来吗？<br>没有错，的确认不出来, 此时需要转换图片的 loader, 来处理图片的问题,  主要用到 <code>url-loader</code>  和   <code>file-loader</code><br>注意: <code>url-loader</code> 中的部分功能要用到 <code>file-loader</code>,  要下载两个模块</p>
</blockquote>
<ul>
<li><p>下载依赖包</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add url-loader file-loader -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置loader</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">'url-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        <span class="comment">// 超过 8k 就不转 base64, 小于 8k 才转</span></span><br><span class="line">        limit: <span class="number">8</span> * <span class="number">1024</span>,</span><br><span class="line">        <span class="comment">// 配置输出的文件名</span></span><br><span class="line">        name: <span class="string">'[name].[ext]'</span>,</span><br><span class="line">        <span class="comment">// 配置静态资源的引用路径</span></span><br><span class="line">        publicPath: <span class="string">"../images/"</span>,</span><br><span class="line">        <span class="comment">// 配置输出的文件目录</span></span><br><span class="line">        outputPath: <span class="string">"images/"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="清除dist目录的插件"><a href="#清除dist目录的插件" class="headerlink" title="清除dist目录的插件"></a>清除dist目录的插件</h2><blockquote>
<p>使用 <a href="https://www.webpackjs.com/guides/output-management/#%E6%B8%85%E7%90%86-dist-%E6%96%87%E4%BB%B6%E5%A4%B9" target="_blank" rel="noopener">clean-webpack-plugin插件</a> 在每次打包前清除下dist文件夹。</p>
</blockquote>
<ul>
<li><p>安装依赖包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add clean-webpack-plugin -D</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 其他代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入清除插件</span></span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>  (<span class="string">'clean-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// 其他配置</span></span><br><span class="line"></span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="comment">// ....</span></span><br><span class="line">      <span class="comment">// 调用清除打包目录插件</span></span><br><span class="line">      <span class="keyword">new</span> CleanWebpackPlugin()</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="webpack-配置字体图标-url-loader"><a href="#webpack-配置字体图标-url-loader" class="headerlink" title="webpack 配置字体图标 - url-loader"></a>webpack 配置字体图标 - url-loader</h2><ul>
<li><p>字体图标 和 图片的配置一致</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 处理字体图标的解析</span></span><br><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.(eot|svg|ttf|woff|woff2)$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">'url-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        limit: <span class="number">8</span> * <span class="number">1024</span>,</span><br><span class="line">        <span class="comment">// 配置输出的文件名</span></span><br><span class="line">        name: <span class="string">'[name].[ext]'</span>,</span><br><span class="line">        <span class="comment">// 配置静态资源的引用路径</span></span><br><span class="line">        publicPath: <span class="string">"../fonts/"</span>,</span><br><span class="line">        <span class="comment">// 配置输出的文件目录</span></span><br><span class="line">        outputPath: <span class="string">"fonts/"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="webpack-使用eslint对js语法检查"><a href="#webpack-使用eslint对js语法检查" class="headerlink" title="webpack 使用eslint对js语法检查"></a>webpack 使用eslint对js语法检查</h2><blockquote>
<p>eslint-config-airbnb-base不支持react语法,eslint-config-airbnb支持react语法</p>
</blockquote>
<blockquote>
<p>正常来讲，一个文件只能被一个loader处理。 当一个文件要被多个loader处理，那么一定要指定loader执行的先后顺序：<code>先执行eslint 在执行babel</code></p>
</blockquote>
<ul>
<li><p>安装包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add eslint-config-airbnb-base eslint-plugin-import eslint</span><br></pre></td></tr></table></figure></li>
<li><p>配置规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      语法检查： eslint-loader  eslint</span></span><br><span class="line"><span class="comment">        注意：只检查自己写的源代码，第三方的库是不用检查的</span></span><br><span class="line"><span class="comment">        设置检查规则：</span></span><br><span class="line"><span class="comment">          package.json中eslintConfig中设置~</span></span><br><span class="line"><span class="comment">            "eslintConfig": &#123;</span></span><br><span class="line"><span class="comment">              "extends": "airbnb-base"</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">          airbnb --&gt; eslint-config-airbnb-base  eslint-plugin-import eslint</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      loader: <span class="string">'eslint-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        <span class="comment">// 自动修复eslint的错误</span></span><br><span class="line">        fix: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="webpack-使用-babel-处理高版本的-js-语法"><a href="#webpack-使用-babel-处理高版本的-js-语法" class="headerlink" title="webpack 使用 babel 处理高版本的 js 语法"></a>webpack 使用 babel 处理高版本的 js 语法</h2><blockquote>
<p>babel 的介绍 =&gt; 用于处理高版本 js语法 的兼容性</p>
</blockquote>
<ul>
<li>安装包</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D babel-loader @babel&#x2F;core @babel&#x2F;preset-env @babel&#x2F;polyfill core-js</span><br></pre></td></tr></table></figure>

<ul>
<li>配置规则</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      js兼容性处理：babel-loader @babel/core </span></span><br><span class="line"><span class="comment">        1. 基本js兼容性处理 --&gt; @babel/preset-env</span></span><br><span class="line"><span class="comment">          问题：只能转换基本语法，如promise高级语法不能转换</span></span><br><span class="line"><span class="comment">        2. 全部js兼容性处理 --&gt; @babel/polyfill  </span></span><br><span class="line"><span class="comment">          问题：我只要解决部分兼容性问题，但是将所有兼容性代码全部引入，体积太大了~</span></span><br><span class="line"><span class="comment">        3. 需要做兼容性处理的就做：按需加载  --&gt; core-js</span></span><br><span class="line"><span class="comment">    */</span>  </span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        <span class="comment">// 预设：指示babel做怎么样的兼容性处理</span></span><br><span class="line">        presets: [</span><br><span class="line">          [</span><br><span class="line">            <span class="string">'@babel/preset-env'</span>,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="comment">// 按需加载</span></span><br><span class="line">              useBuiltIns: <span class="string">'usage'</span>,</span><br><span class="line">              <span class="comment">// 指定core-js版本</span></span><br><span class="line">              corejs: &#123;</span><br><span class="line">                version: <span class="number">3</span></span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="comment">// 指定兼容性做到哪个版本浏览器</span></span><br><span class="line">              targets: &#123;</span><br><span class="line">                chrome: <span class="string">'60'</span>,</span><br><span class="line">                firefox: <span class="string">'60'</span>,</span><br><span class="line">                ie: <span class="string">'9'</span>,</span><br><span class="line">                safari: <span class="string">'10'</span>,</span><br><span class="line">                edge: <span class="string">'17'</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="开发服务器自动刷新"><a href="#开发服务器自动刷新" class="headerlink" title="开发服务器自动刷新"></a>开发服务器自动刷新</h2><ul>
<li><p>下载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add webpack-dev-server -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>在package.json中配置scripts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scripts: &#123;</span><br><span class="line">	<span class="string">"build"</span>: <span class="string">"webpack --config webpack.config.js"</span></span><br><span class="line">	<span class="string">"dev"</span>: <span class="string">"webpack-dev-server --config   webpack.config.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>配置devServer,与module是平级</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在webpack.config.js中配置服务器</span></span><br><span class="line">devServer: &#123;</span><br><span class="line"> port: <span class="number">3000</span>, <span class="comment">// 端口号</span></span><br><span class="line"> open: <span class="literal">true</span>, <span class="comment">// 自动打开浏览器</span></span><br><span class="line">  hot: <span class="literal">true</span>   <span class="comment">// 开启热更新</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="webpack性能优化"><a href="#webpack性能优化" class="headerlink" title="webpack性能优化"></a>webpack性能优化</h1></li>
<li><p>开发环境性能优化</p>
<ul>
<li>优化打包构建速度  </li>
<li>优化代码调试</li>
</ul>
</li>
<li><p>生产环境性能优化</p>
<ul>
<li>优化打包构建速度</li>
<li>优化代码运行的性能</li>
</ul>
</li>
</ul>
<h2 id="1-HMR功能-开启热更新"><a href="#1-HMR功能-开启热更新" class="headerlink" title="1.HMR功能 开启热更新"></a>1.HMR功能 开启热更新</h2><h2 id="2-source-map-提供源代码到构建后代码映射的技术"><a href="#2-source-map-提供源代码到构建后代码映射的技术" class="headerlink" title="2.source-map 提供源代码到构建后代码映射的技术"></a>2.source-map 提供源代码到构建后代码映射的技术</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;开发环境</span><br><span class="line">  devtool: &#39;eval-source-map&#39;</span><br><span class="line">&#x2F;&#x2F;生产环境</span><br><span class="line">  devtool: &#39;source-map&#39;</span><br></pre></td></tr></table></figure>
<h2 id="3-oneOf"><a href="#3-oneOf" class="headerlink" title="3.oneOf"></a>3.oneOf</h2><p>以下loader只会匹配一个<br>注意：不能有两个配置处理同一种类型文件</p>
<h2 id="4-缓存"><a href="#4-缓存" class="headerlink" title="4.缓存"></a>4.缓存</h2><ul>
<li>babel缓存<ul>
<li>cacheDirectory:true</li>
</ul>
</li>
<li>文件资源缓存<ul>
<li>hash:修改文件名加上hash值 但是有问题会导致缓存失效</li>
<li>chunkhash:根据chunk生成的hash值,但是都是来源于同一个chunk,js和css的hash值还是一样</li>
<li>contenthash:根据文件的内容生成的hash值,不同文件的hash值一定不一样</li>
</ul>
</li>
</ul>
<h2 id="5-tree-shaking-去除无用的模块"><a href="#5-tree-shaking-去除无用的模块" class="headerlink" title="5.tree shaking :去除无用的模块"></a>5.tree shaking :去除无用的模块</h2><ul>
<li><p>前提:</p>
<ul>
<li>1.必须使用ES6模块化 </li>
<li>2.开启production环境</li>
</ul>
</li>
<li><p>作用:<br>减少代码体积</p>
</li>
<li><p>在package.json中配置</p>
</li>
</ul>
<p><code>&#39;sideEffects&#39;:false</code> </p>
<blockquote>
<p>所有代码都没有副作用(都可以进行tree shaking),但是可能会吧css / @babel/polyfill(副作用)文件干掉</p>
</blockquote>
<p><code>&#39;sideEffects&#39;:[&#39;*.css&#39;]</code></p>
<h2 id="6-code-split-代码分割"><a href="#6-code-split-代码分割" class="headerlink" title="6.code split 代码分割"></a>6.code split 代码分割</h2><p>单入口和多入口</p>
<h2 id="7-懒加载和预加载"><a href="#7-懒加载和预加载" class="headerlink" title="7.懒加载和预加载"></a>7.懒加载和预加载</h2><p>预加载兼容性不好</p>
<h2 id="8-PWA-渐进式网络开发应用程序-离线可访问"><a href="#8-PWA-渐进式网络开发应用程序-离线可访问" class="headerlink" title="8.PWA 渐进式网络开发应用程序(离线可访问)"></a>8.PWA 渐进式网络开发应用程序(离线可访问)</h2><p>例如:淘宝网</p>
<h2 id="9-多进程打包"><a href="#9-多进程打包" class="headerlink" title="9.多进程打包"></a>9.多进程打包</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add thread-loader -D</span><br></pre></td></tr></table></figure>
<p>给 babel 用,进程开启是需要时间的,大概600ms,只有工作时间比较长,才需要多进程打包</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">'thread-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        workers: <span class="number">2</span> <span class="comment">// 进程2个</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        presets: [</span><br><span class="line">          [</span><br><span class="line">            <span class="string">'@babel/preset-env'</span>,</span><br><span class="line">            &#123;</span><br><span class="line">              useBuiltIns: <span class="string">'usage'</span>,</span><br><span class="line">              corejs: &#123; <span class="attr">version</span>: <span class="number">3</span> &#125;,</span><br><span class="line">              targets: &#123;</span><br><span class="line">                chrome: <span class="string">'60'</span>,</span><br><span class="line">                firefox: <span class="string">'50'</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        ],</span><br><span class="line">        <span class="comment">// 开启babel缓存</span></span><br><span class="line">        <span class="comment">// 第二次构建时，会读取之前的缓存</span></span><br><span class="line">        cacheDirectory: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="10-externals"><a href="#10-externals" class="headerlink" title="10.externals"></a>10.externals</h2><p>拒绝一些第三方包打包,使用后需要在html手动引入cdn</p>
<h2 id="11-dll"><a href="#11-dll" class="headerlink" title="11.dll"></a>11.dll</h2><ul>
<li>使用dll技术，对某些库（第三方库：jquery、react、vue…）进行单独打包<ul>
<li>当你运行 webpack 时，默认查找 webpack.config.js 配置文件</li>
<li>需求：需要运行 webpack.dll.js 文件</li>
<li>–&gt; webpack –config webpack.dll.js</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    <span class="comment">// 最终打包生成的[name] --&gt; jquery</span></span><br><span class="line">    <span class="comment">// ['jquery'] --&gt; 要打包的库是jquery</span></span><br><span class="line">    jquery: [<span class="string">'jquery'</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'[name].js'</span>,</span><br><span class="line">    path: resolve(__dirname, <span class="string">'dll'</span>),</span><br><span class="line">    library: <span class="string">'[name]_[hash]'</span> <span class="comment">// 打包的库里面向外暴露出去的内容叫什么名字</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// 打包生成一个 manifest.json --&gt; 提供和jquery映射</span></span><br><span class="line">    <span class="keyword">new</span> webpack.DllPlugin(&#123;</span><br><span class="line">      name: <span class="string">'[name]_[hash]'</span>, <span class="comment">// 映射库的暴露的内容名称</span></span><br><span class="line">      path: resolve(__dirname, <span class="string">'dll/manifest.json'</span>) <span class="comment">// 输出文件路径</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  mode: <span class="string">'production'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">ZemanQuim</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.zemanblog.cn/2018/11/20/webpack%E7%AC%94%E8%AE%B0/">https://www.zemanblog.cn/2018/11/20/webpack%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.zemanblog.cn">ZemanQuim</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/webpack/">webpack    </a></div><div class="post_share"><div class="social-share" data-image="https://tva1.sinaimg.cn/large/006tNbRwgy1g9ypjtzltyj319e0jgmyq.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2018/11/23/Vue/vue-cli%204.x%E8%84%9A%E6%89%8B%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8/"><img class="prev_cover lazyload" data-src="https://tva1.sinaimg.cn/large/006tNbRwgy1g9ysh4x2iuj30hn0aiq2v.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>vue脚手架的使用</span></div></a></div><div class="next-post pull_right"><a href="/2018/10/27/TypeScript%E7%AC%94%E8%AE%B0/"><img class="next_cover lazyload" data-src="https://tva1.sinaimg.cn/large/006tNbRwgy1gaid6yro46j31ib0u0jtb.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>TypeScript笔记</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'a9f24c28a03ea71e4ebf',
  clientSecret: '98ddbf726bd9e33684bfb1c8fac75e8910441001',
  repo: 'archer993.github.io',
  owner: 'archer993',
  admin: 'archer993',
  id: md5(decodeURI(location.pathname)),
  language: ''
})
gitalk.render('gitalk-container')</script></div></div></div><footer id="footer" style="background-image: url(https://tva1.sinaimg.cn/large/006tNbRwgy1g9ypjtzltyj319e0jgmyq.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2020 By ZemanQuim</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a href="http://www.beian.miit.gov.cn/state/outPortal/loginPortal.action" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"><span>皖ICP备20003424号</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/click_heart.js"></script></body></html>